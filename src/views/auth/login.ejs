<div class="container-fluid py-3">
    <div class="row">
        <div class="col-md-12 mx-auto">
                <div class="card card-body">
                    <h3 class="text-center mb-4 sayem-title-black">Yetkili girişi</h3>
                    <div id="wrong-password" class="alert alert-danger hidden">
                        <a class="close font-weight-light" data-dismiss="alert" href="#">×</a> Kullanıcı adı veya şifre hatalı
                    </div>
                    <fieldset>
                        <form id="login-form" method="POST">
                            <div class="form-group has-success">
                                <input class="form-control input-lg" placeholder="Kullanıcı adı" id="username" name="username" value="" type="text">
                                <div class="invalid-feedback">
                                    Lütfen kullanıcı adınızı giriniz.
                                </div>
                            </div>
                            <div class="form-group has-success">
                                <input class="form-control input-lg" rows="3" placeholder="Şifre" id="password" name="password" value="" type="password">
                                <div class="invalid-feedback">
                                    Lütfen şifrenizi giriniz.
                                </div>
                            </div>

                            <input class="btn btn-lg sayem-primary-button btn-block" value="Giriş" type="submit">
                        </form>
                    </fieldset>
                </div>
        </div>
    </div>
</div>

<script>
    (function() {
          'use strict';
          window.addEventListener('load', function() {
                $(document).ready(function() {
                    $("#login-form").on("submit", function(e) {
                        e.preventDefault();
                        var frm = document.getElementById('login-form') || null;
                        var username = $("#username").val();
                        var password = $("#password").val();
                        if (frm) {
                            frm.action = '/login';
                        }
                        if (!username || !password) {
                            return false;
                        }
                        $.ajax({
                            url: "/login",
                            type: "POST",
                            data: {
                                username: username,
                                password: password
                            },
                            success: function(data) {
                                console.log(data.data);
                                localStorage.setItem("SavedToken", 'Bearer ' + data.data);
                                window.location.href = "/admin";
                            },
                            error: function(err) {
                                console.log(err);
                            }
                        });
                    });
                });
                
          }, false);
    })();
</script>